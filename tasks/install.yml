---
- name: "Download Vivado from url"
  get_url: 
    url: "{{ vivado_download_url }}"
    dest: "/tmp/vivado.tar.gz"
    owner: "{{ vivado_user }}"
    group: "{{ vivado_group }}"
  register: result
  until: result|success
  retries: 5
  delay: 2

- name: "Unarchive /tmp/vivado.tar.g"
  unarchive: 
    src: "/tmp/vivado.tar.gz"
    remote_src: yes 
    dest: "/home/{{ vivado_user }}"
    owner: "{{ vivado_user }}"
    group: "{{ vivado_group }}"

- name: "Configure the installation file"
  template:
    src: install_config.txt.j2
    dest: "/home/{{ vivado_user }}/install_config.txt"
    owner: "{{ vivado_user }}"
    group: "{{ vivado_group }}"
    mode: 0644